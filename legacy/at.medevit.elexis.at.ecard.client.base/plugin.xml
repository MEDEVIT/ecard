<?xml version="1.0" encoding="UTF-8"?>
<?eclipse version="3.4"?>
<plugin>
   <extension
         point="org.eclipse.ui.preferencePages">
      <page
            class="at.medevit.elexis.at.ecard.client.base.ui.preferencePage.GINAServicePreferencePage"
            id="at.medevit.elexis.at.ecard.client.base.ui.preferencePage.GINAServicePreferencePage"
            name="e-Card Anbindung">
      </page>
   </extension>
   <extension
         point="org.eclipse.ui.commands">
      <command
            id="at.medevit.elexis.at.ecard.client.base.command.DialogAufbauen"
            name="Dialog aufbauen">
      </command>
      <command
            id="at.medevit.elexis.at.ecard.client.base.command.CardReaderInformation"
            name="Kartenleser Status Information">
      </command>
      <command
            id="at.medevit.elexis.at.ecard.client.base.command.GINAStatusInformation"
            name="GINA Status Information">
      </command>
      <command
            id="at.medevit.elexis.at.ecard.client.base.command.DialogStatusInformation"
            name="Dialog Status Information">
      </command>
      <command
            id="at.medevit.elexis.at.ecard.client.base.command.DialogSchliessen"
            name="Dialog schliessen">
      </command>
      <command
            id="at.medevit.elexis.at.ecard.client.base.command.PINAendern"
            name="PIN Ändern">
      </command>
   </extension>
   <extension
         point="org.eclipse.ui.handlers">
      <handler
            class="at.medevit.elexis.at.ecard.client.base.command.DialogAufbauen"
            commandId="at.medevit.elexis.at.ecard.client.base.command.DialogAufbauen">
         <enabledWhen>
            <with
                  variable="at.medevit.elexis.at.ecard.client.base.sourceprovider.CardReaderStatusSourceProvider.CardReaderStatus">
               <equals
                     value="1">
               </equals>
            </with>
         </enabledWhen>
      </handler>
      <handler
            class="at.medevit.elexis.at.ecard.client.base.command.CardReaderInformation"
            commandId="at.medevit.elexis.at.ecard.client.base.command.CardReaderInformation">
         <enabledWhen>
            <with
                  variable="at.medevit.elexis.at.ecard.client.base.sourceprovider.CardReaderStatusSourceProvider.CardReaderStatus">
               <or>
                  <equals
                        value="0">
                  </equals>
                  <equals
                        value="1">
                  </equals>
                  <equals
                        value="2">
                  </equals>
                  <equals
                        value="3">
                  </equals>
               </or>
            </with>
         </enabledWhen>
      </handler>
      <handler
            class="at.medevit.elexis.at.ecard.client.base.command.GINAStatusInformation"
            commandId="at.medevit.elexis.at.ecard.client.base.command.GINAStatusInformation">
      </handler>
      <handler
            class="at.medevit.elexis.at.ecard.client.base.command.DialogStatusInformation"
            commandId="at.medevit.elexis.at.ecard.client.base.command.DialogStatusInformation">
      </handler>
      <handler
            class="at.medevit.elexis.at.ecard.client.base.command.DialogSchliessen"
            commandId="at.medevit.elexis.at.ecard.client.base.command.DialogSchliessen">
         <enabledWhen>
            <with
                  variable="at.medevit.elexis.at.ecard.client.base.sourceprovider.DialogStatusSourceProvider.DialogStatus">
               <or>
                  <equals
                        value="1">
                  </equals>
                  <equals
                        value="2">
                  </equals>
               </or>
            </with>
         </enabledWhen>
      </handler>
      <handler
            class="at.medevit.elexis.at.ecard.client.base.command.PINAendern"
            commandId="at.medevit.elexis.at.ecard.client.base.command.PINAendern">
         <enabledWhen>
            <with
                  variable="at.medevit.elexis.at.ecard.client.base.sourceprovider.CardReaderStatusSourceProvider.CardReaderStatus">
               <equals
                     value="1">
               </equals>
            </with>
         </enabledWhen>
      </handler>
   </extension>
   <extension
         point="org.eclipse.ui.menus">
      <menuContribution
            allPopups="false"
            locationURI="toolbar:org.eclipse.ui.main.toolbar">
         <toolbar
               id="at.medevit.elexis.at.ecard.client">
            <command
                  commandId="at.medevit.elexis.at.ecard.client.base.command.GINAStatusInformation"
                  icon="rsc/icons/ginaboxIconHourglass.png"
                  label="GINA Status Information"
                  style="push"
                  tooltip="Informationen zum Status der GINA Box">
            </command>
            <command
                  commandId="at.medevit.elexis.at.ecard.client.base.command.CardReaderInformation"
                  icon="rsc/icons/noCardIcon.png"
                  label="Kartenleser Status Information"
                  style="push">
            </command>
            <command
                  commandId="at.medevit.elexis.at.ecard.client.base.command.DialogStatusInformation"
                  icon="rsc/icons-nonfree/bullet_ball_grey.png"
                  label="Dialog Status Information"
                  style="push">
            </command>
         </toolbar>
      </menuContribution>
      <menuContribution
            allPopups="false"
            locationURI="menu:GINAMenu">
         <command
               commandId="at.medevit.elexis.at.ecard.client.base.command.DialogAufbauen"
               label="Dialog aufbauen"
               style="push">
            <visibleWhen
                  checkEnabled="false">
               <with
                     variable="at.medevit.elexis.at.ecard.client.base.sourceprovider.DialogStatusSourceProvider.DialogStatus">
                  <equals
                        value="0">
                  </equals>
               </with>
            </visibleWhen>
         </command>
         <command
               commandId="at.medevit.elexis.at.ecard.client.base.command.DialogSchliessen"
               label="Dialog schliessen"
               style="push">
            <visibleWhen
                  checkEnabled="false">
               <with
                     variable="at.medevit.elexis.at.ecard.client.base.sourceprovider.DialogStatusSourceProvider.DialogStatus">
                  <or>
                     <equals
                           value="1">
                     </equals>
                     <equals
                           value="2">
                     </equals>
                  </or>
               </with>
            </visibleWhen>
         </command>
         <menu
               id="eCardMenu.Allgemeines"
               label="Allgemeines">
            <command
                  commandId="at.medevit.elexis.at.ecard.client.base.command.PINAendern"
                  icon="rsc/icons/oCardIcon.png"
                  label="o-card: PIN ändern"
                  style="push">
            </command>
            <separator
                  name="at.medevit.elexis.at.ecard.client.base.separator4"
                  visible="true">
            </separator>
            <command
                  commandId="at.medevit.elexis.at.ecard.client.base.command.GINAStatusInformation"
                  label="GINA Status"
                  style="push">
            </command>
            <command
                  commandId="at.medevit.elexis.at.ecard.client.base.command.CardReaderInformation"
                  label="Kartenleser Status"
                  style="push">
            </command>
            <command
                  commandId="at.medevit.elexis.at.ecard.client.base.command.DialogStatusInformation"
                  label="Dialog Status"
                  style="push">
            </command>
         </menu>
         <separator
               name="additions"
               visible="false">
         </separator>
      </menuContribution>
   </extension>
   <extension
         point="org.eclipse.ui.services">
      <sourceProvider
            provider="at.medevit.elexis.at.ecard.client.base.sourceprovider.GINAStatusSourceProvider">
         <variable
               name="at.medevit.elexis.at.ecard.client.base.sourceprovider.GINAStatusSourceProvider.GINAStatus"
               priorityLevel="workbench">
         </variable>
      </sourceProvider>
      <sourceProvider
            provider="at.medevit.elexis.at.ecard.client.base.sourceprovider.DialogStatusSourceProvider">
         <variable
               name="at.medevit.elexis.at.ecard.client.base.sourceprovider.DialogStatusSourceProvider.DialogStatus"
               priorityLevel="workbench">
         </variable>
      </sourceProvider>
      <sourceProvider
            provider="at.medevit.elexis.at.ecard.client.base.sourceprovider.CardReaderStatusSourceProvider">
         <variable
               name="at.medevit.elexis.at.ecard.client.base.sourceprovider.CardReaderStatusSourceProvider.CardReaderStatus"
               priorityLevel="workbench">
         </variable>
      </sourceProvider>
   </extension>
   <extension
         point="org.eclipse.ui.startup">
      <startup
            class="at.medevit.elexis.at.ecard.client.base.updatertasks.CardReaderUpdater">
      </startup>
      <startup
            class="at.medevit.elexis.at.ecard.client.base.updatertasks.GINAStatusUpdater">
      </startup>tartup>
   </extension>
   <extension
         point="org.eclipse.help.contexts">
      <contexts
            file="contextHelp.xml"
            plugin="at.medevit.elexis.at.ecard.client.base">
      </contexts>
   </extension>
   <extension
         point="org.eclipse.ui.views">
      <category
            id="at.medevit.elexis.at.ecard.client.base.ecard"
            name="eCard">
      </category>
      <view
            category="at.medevit.elexis.at.ecard.client.base.ecard"
            class="at.medevit.elexis.at.ecard.client.base.ui.MessageView"
            icon="rsc/icons-nonfree/mail2.png"
            id="at.medevit.elexis.at.ecard.client.base.ui.MessageView"
            name="GINA Nachrichten"
            restorable="true">
      </view>
   </extension>

</plugin>
